sudo: false
language: go
go:
- 1.9
install: make setup build
before_deploy:
- mkdir -p bin
- GOOS=linux GOARCH=amd64  go build -o bin/kafkacli-Linux-x86_64  -ldflags="-X main.version=$TRAVIS_TAG"
- GOOS=darwin GOARCH=amd64 go build -o bin/kafkacli-Darwin-x86_64 -ldflags="-X main.version=$TRAVIS_TAG"
deploy:
  provider: releases
  file_glob: true
  file: bin/*
  skip_cleanup: true
  on:
    tags: true
    go: 1.9
before_install:
- openssl aes-256-cbc -K $encrypted_5dd58f501b7d_key -iv $encrypted_5dd58f501b7d_iv
  -in github_deploy_key.enc -out github_deploy_key -d
- curl -L -s https://github.com/golang/dep/releases/download/v0.5.0/dep-linux-amd64 -o $GOPATH/bin/dep
- chmod +x $GOPATH/bin/dep
